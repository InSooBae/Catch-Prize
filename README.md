# Catch Prize!

> WebRTC ë¥¼ ì´ìš©í•œ í™”ìƒì±„íŒ… ë³´ë“œê²Œì„ í”Œë«í¼
> 

---

## ğŸ™‰ SSAFY 2ë°˜ 3íŒ€

- ğŸ‘¨â€ğŸ’» ë°°ì¸ìˆ˜ - íŒ€ì¥, BE ê°œë°œ ì´ê´„ (ì¹œêµ¬, ë°©, ë¡œê·¸ì¸ ê°œë°œ)
- ğŸ‘¨â€ğŸ’» ê¶Œìˆœì„ - BE ê°œë°œ, OpenVidu ì ìš©
- ğŸ‘¨â€ğŸ’» ì´ìƒì§„ - AWS, Docker, ë°°í¬ Infra
- ğŸ‘¨â€ğŸ’» í™©íƒœí¬ - FE ê°œë°œ ì´ê´„, ë””ìì¸
- ğŸ‘¨â€ğŸ’» ê¹€ë„ì—° - FE ê°œë°œ, Socket, ê²Œì„ ì‹œìŠ¤í…œ êµ¬í˜„
- ğŸ‘¨â€ğŸ’» ì—¼ìˆ˜í™ - FE ê°œë°œ, OpenVidu ì ìš©

---

## âš¡ í”„ë¡œì íŠ¸ ê°œìš”

- ê¸°ê°„ : 2022.07.05 ~ 2022.08.19
- ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ìŒì„±, ì˜ìƒ, ì±„íŒ…ì„ í†µí•´ ì„œë¡œ ì†Œí†µí•˜ë©° ë³´ë“œê²Œì„ì„ ì˜¨ë¼ì¸ìœ¼ë¡œ í”Œë ˆì´
- íšŒì›ê°€ì… ì—†ì´ SNS ì•„ì´ë”” ë“±ì„ ì´ìš©í•˜ì—¬ ê°„í¸í•˜ê²Œ ë¡œê·¸ì¸
- ì¹œêµ¬ê°€ ì—†ëŠ” ìœ ì €ë“¤ë„ ì¦ê¸¸ ìˆ˜ ìˆê²Œ ê²Œì„ ë°© ëª©ë¡ ë“±ì˜ ê¸°ëŠ¥ ì§€ì›
- ì—¬ëŸ¬ê°€ì§€ ê²Œì„ì„ í†µí•©í•˜ì—¬ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ë³´ë“œê²Œì„ í”Œë«í¼

---

## ğŸ” í”„ë¡œì íŠ¸ ì†Œê°œ

- WebRTCë¥¼ ì´ìš©í•˜ì—¬ í™”ìƒì±„íŒ… ë³´ë“œê²Œì„ì„ ì§„í–‰í•˜ëŠ” í”Œë«í¼
    - ìƒëŒ€ì˜ ì–¼êµ´ì„ ë³´ë©° ê²Œì„ì„ í•˜ëŠ” ì‹¬ë¦¬ì „ ê²Œì„ì´ ì£¼ë¥˜
    - ë‹¤ì–‘í•œ ì•„ì´í…œ ì‚¬ìš©ìœ¼ë¡œ ë”ìš± í¥ë¯¸ì§„ì§„í•˜ê²Œ ì§„í–‰ ê°€ëŠ¥

- í˜¸ë¶ˆí˜¸ í¬ì»¤
    - ì‹¬ë¦¬ì „ì„ í†µí•´ ìƒëŒ€ ì¹´ë“œ ì¢…ë¥˜ë¥¼ ë§ì¶”ëŠ” ê²Œì„



https://user-images.githubusercontent.com/48831854/202899793-06a61130-2300-4a20-906e-ec73848ab893.mp4



---

## ğŸ’¡ êµ¬í˜„ ê¸°ëŠ¥

![image29.gif](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/6e94efe9-68e7-42c7-95ee-cb2b618b716f/image29.gif?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T111537Z&X-Amz-Expires=86400&X-Amz-Signature=f54aeaec79e22b88e61e2fc3d389d0c23b9c0c60c37703b27f27ddaee9cf128b&X-Amz-SignedHeaders=host&x-id=GetObject)

- OAuth2.0 ë¡œê·¸ì¸
- ì¹œêµ¬ ê¸°ëŠ¥
    - ì¹œêµ¬ ì˜¨ë¼ì¸ ìƒíƒœ í™•ì¸ ê°€ëŠ¥
    - ì¹œêµ¬ ì¶”ê°€ ë° ì œê±° ì‹¤ì‹œê°„ ì ìš©
    - ì¹œêµ¬ ê²Œì„ ë°© ì°¸ê°€ ê¸°ëŠ¥

![ì¹œêµ¬ ì˜¤í”„ë¼ì¸](https://user-images.githubusercontent.com/97645988/195661806-e9642ad8-bd4a-4898-95e0-32e2930fb794.gif)
![ì¹œêµ¬ì¶”ê°€](https://user-images.githubusercontent.com/97645988/195661818-2305a949-fbe8-4f25-8e8a-6f8b224ba17b.gif)

- ê²Œì„ ë¡œë¹„ ê¸°ëŠ¥
    - ê²Œì„ ë°© ì¶”ê°€ ë° ì œê±° ì‹¤ì‹œê°„ í™•ì¸



- ê²Œì„ ê¸°ëŠ¥
    - ì¹´ë“œë¥¼ ì •í•˜ì—¬ ìƒëŒ€ ê³µê²© ë° ìˆ˜ë¹„ ê°€ëŠ¥
    - ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒëŒ€ í™”ìƒì„ ì²´í¬í•˜ë©° ê²Œì„ ì§„í–‰ ê°€ëŠ¥

![image30-min.gif](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/f392dde0-928b-4016-a182-ca00dc9f7a85/image30-min.gif?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T111537Z&X-Amz-Expires=86400&X-Amz-Signature=76a95989c477d23b8c60917ef6db2802c8b4507e46739ce8762b41d9dadf8491&X-Amz-SignedHeaders=host&x-id=GetObject)

- ì•„ì´í…œ ê¸°ëŠ¥
    - ë¹„ë””ì˜¤ í™”ë©´ ìƒí•˜ ë’¤ì§‘ê¸°
    - ë¹„ë””ì˜¤ í™”ë©´ í‘ë°± ì ìš©

![image31.gif](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/08a0e157-99f5-4ae6-bcf8-f699733acdbb/image31.gif?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T111734Z&X-Amz-Expires=86400&X-Amz-Signature=a9afbe02867c071c0f6b19ab90dec9efde034379217dfa46d2d1eb3fdaca69d3&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22image31.gif%22&x-id=GetObject)
---

## âš™ï¸ ê¸°ìˆ  ìŠ¤íƒ

### ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

![sysarch.png](https://s3.us-west-2.amazonaws.com/secure.notion-static.com/a99a92a0-6586-4190-9391-d80dc0ccd0e2/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45EIPT3X45%2F20221120%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20221120T111905Z&X-Amz-Expires=86400&X-Amz-Signature=9c15c01281f3deeb2030cc838f5edea9a5b93511c660397b5a4d6966d8d1dcc7&X-Amz-SignedHeaders=host&response-content-disposition=filename%3D%22Untitled.png%22&x-id=GetObject)

### âœ¨ **Frontend**

- vue - 3.2.13
- vuex - 4.0.2
- vue-axios - 3.4.1
- vue router - 4.1.2
- socket.io-client - 4.5.1
- element-plus - 2.2.9
- openvidu-browser - 2.22.0

### âœ¨ **Backend**

- MySQL - 8.0.28
- Redis
- Spring Boot - 2.7.1
- WebRTC
- Deploy
- AWS
- EC2
- RDS
- NginX
- Docker
- Jenkins

---

## ğŸŒµ Git ì»¨ë²¤ì…˜

### ì»¤ë°‹ ë©”ì„¸ì§€ ì»¨ë²¤ì…˜

| emoji | type | desc |
| --- | --- | --- |
| âš¡ | feat | ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ |
| ğŸ› ï¸ | fix | ë²„ê·¸ ìˆ˜ì • |
| ğŸ“ | docs | ë¬¸ì„œ ê´€ë ¨ |
| ğŸ¨ | style | ìŠ¤íƒ€ì¼ ê´€ë ¨ |
| âš™ï¸ | refactor | ì½”ë“œ ë¦¬íŒ©í† ë§ |
| ğŸš— | test | í…ŒìŠ¤íŠ¸ ê´€ë ¨ ì½”ë“œ ìˆ˜ì • |
| ğŸŒµ | chore | ì„¤ì • ë³€ê²½ |
| ğŸ‹ | cicd | ë°°í¬ ê´€ë ¨ ìˆ˜ì • |
| âœ’ï¸ | comment | ì£¼ì„ ì¶”ê°€ ë° ë³€ê²½ |

```markup
emoji type : subject

body (optional)
...
...

footer (optional)
```

### Git ë¸Œëœì¹˜ ì»¨ë²¤ì…˜

- master
    - frontend-develop
        - fe/feature/login
    - backend-develop
        - be/feature/login

- `feature/login`ê³¼ ê°™ì´ ìì‹ ì´ ë§¡ì€ ê¸°ëŠ¥ì„ ë‚˜íƒ€ë‚´ëŠ” ë¸Œëœì¹˜ë¥¼ ë¡œì»¬ì— ìƒì„± í›„ ì‘ì—…
- `feature/login`ìœ¼ë¡œ ëª¨ë“  ì‘ì—… í›„ ì›ê²© ì €ì¥ì†Œì— `develop branch`ì— pushí•˜ì—¬ PR
- PRì—ì„œ ì„œë¡œ ì½”ë©˜íŠ¸ë¥¼ ë‚¨ê¸°ê³  ë¦¬ë·° í›„ `develop branch`ë¡œ merge
- branchë¥¼ mergeí•  ë•Œ í•­ìƒ -no-ff ì˜µì…˜ì„ ë¶™ì—¬ branchì— ëŒ€í•œ ê¸°ë¡ì„ ìœ ì§€í•œë‹¤.
- ì™„ë£Œë˜ì§€ ì•Šì€ PRì€ ì•ì— `Draft:` ë¥¼ ë¶™íŒë‹¤.

---

## ğŸŒ ë°°í¬ ë°©ë²•

### ë°°í¬ ì„œë²„ 1 (ìœ ì € ì„œë²„)

- `.env` íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤

```markup
USER_SV_PORT=<port for user server>
USER_SV_DB_URL=jdbc:mysql://mysql:<mysql port>/<mysql database>
USER_SV_DB_USERNAME=<mysql user name>
USER_SV_DB_PASSWORD=<mysql password>
USER_SV_BASE_URL=https://user.catch-prize.com
USER_SV_BASE_CLIENT_URL=https://catch-prize.com
USER_SV_JWT_SECRET_KEY=<jwt secret key>
USER_SV_KAKAO_CLIENT_ID=<kakao client id>
USER_SV_KAKAO_CLIENT_SECRET=<kakao client secret>
USER_SV_KAKAO_REDIRECT_URI=/oauth2/callback/kakao
USER_SV_GOOGLE_CLIENT_ID=<google cliend id>
USER_SV_GOOGLE_CLIENT_SECRET=<google client secret>
USER_SV_GOOGLE_REDIRECT_URI=/oauth2/callback/google
USER_SV_NAVER_CLIENT_ID=<naver client id>
USER_SV_NAVER_CLIENT_SECRET=<naver client secret>
USER_SV_NAVER_REDIRECT_URI=/oauth2/callback/naver
USER_SV_OPENVIDU_URL=https://ov.catch-prize.com/
USER_SV_OPENVIDU_SECRET=<openvidu secret>

MYSQL_USER=<mysql user name>
MYSQL_PASSWORD=<mysql password>
MYSQL_DATABASE=catchprize
MYSQL_ROOT_PASSWORD=<mysql root password>
MYSQL_TCP_PORT=<port for mysql>

INGAME_SV_PORT=<port for ingame server>
```

- `./init-letsencrypt.sh` ìµœì´ˆ ë°°í¬ ì‹œ ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ì§€ì •ëœ ë„ë©”ì¸ë“¤ì— ëŒ€í•´ì„œ httpsë¥¼ ì ìš©í•œë‹¤.
- `docker-compose up` ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ í•„ìš”í•œ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•œë‹¤.

### ë°°í¬ ì„œë²„ 2 (OpenVidu ì„œë²„)

- Openvidu ServerëŠ” ë°°í¬ì˜ í¸ì˜ë¥¼ ìœ„í•´ AWS CloudFormationì„ ì´ìš©í•œë‹¤.
- `https://docs.openvidu.io/en/stable/deployment/ce/aws/`ì˜ ì ˆì°¨ë¥¼ ê·¸ëŒ€ë¡œ ë”°ë¥¸ë‹¤.
- `/opt/openvidu/.env`ì—ì„œ í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

---

## ğŸ”— ë§í¬ ëª¨ìŒ

- [íŒ€ ë…¸ì…˜ í˜ì´ì§€](https://www.notion.so/3ffec97331794949820351b077cb72a2)
- [OpenVidu í™ˆí˜ì´ì§€](https://openvidu.io/)

---
